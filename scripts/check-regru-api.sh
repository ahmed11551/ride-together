#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ REG.RU API –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

set -e

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–∫–µ–Ω
if [ -f ".env.regru.token" ]; then
    source .env.regru.token
elif [ -n "$REG_RU_API_TOKEN" ]; then
    TOKEN=$REG_RU_API_TOKEN
else
    echo "‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ REG_RU_API_TOKEN –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ .env.regru.token"
    exit 1
fi

TOKEN=${REG_RU_API_TOKEN:-$TOKEN}

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ REG.RU API..."
echo ""

# –ü–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ API endpoints REG.RU
# (REG.RU –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ API, –ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API..."

# REG.RU –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API —á–µ—Ä–µ–∑ –∏—Ö –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
# –¢–æ—á–Ω—ã–π endpoint –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ –∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

echo "‚ö†Ô∏è  REG.RU API —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
echo "–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤"
echo ""
echo "‚úÖ –¢–æ–∫–µ–Ω –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é"

