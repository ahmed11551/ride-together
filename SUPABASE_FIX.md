# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Supabase

## –ü—Ä–æ–±–ª–µ–º–∞

```
ReferenceError: exports is not defined
at http://localhost:8080/node_modules/@supabase/supabase-js/dist/main/index.js
```

## –ü—Ä–∏—á–∏–Ω–∞

Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CommonJS (`exports`), –∞ Vite –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ESM. –ù—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Vite –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è CommonJS –≤ ESM.

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω Supabase –≤ `optimizeDeps.include`

```typescript
optimizeDeps: {
  include: [
    // ... –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    '@supabase/supabase-js', // –í–∫–ª—é—á–∞–µ–º Supabase –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ CommonJS
  ],
  esbuildOptions: {
    target: 'esnext',
    jsx: 'automatic',
    format: 'esm', // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º CommonJS –≤ ESM
  },
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã —É—Å–ª–æ–≤–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π

```typescript
resolve: {
  alias: {
    "@": path.resolve(__dirname, "./src"),
  },
  conditions: ['import', 'module', 'browser', 'default'],
}
```

## –ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç

1. **`optimizeDeps.include`** - Vite –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç Supabase –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç CommonJS –≤ ESM
2. **`format: 'esm'`** - esbuild –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç CommonJS –º–æ–¥—É–ª–∏ –≤ ESM —Ñ–æ—Ä–º–∞—Ç
3. **`conditions`** - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ dev —Å–µ—Ä–≤–µ—Ä–∞:
1. –û—à–∏–±–∫–∞ `exports is not defined` –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
2. Supabase –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
1. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à: `rm -rf node_modules/.vite`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `.env` —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Supabase (–∏–ª–∏ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π auth)
