# üîÑ –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å Supabase –Ω–∞ Timeweb Cloud

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ –±–æ–ª—å—à–∞—è –∑–∞–¥–∞—á–∞!

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è  
**–†–∏—Å–∫–∏:** –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìä –ß—Ç–æ –Ω—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã

### 2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Auth)
- ‚ùå Supabase Auth ‚Üí –°–≤–æ—è —Å–∏—Å—Ç–µ–º–∞
- ‚ùå JWT —Ç–æ–∫–µ–Ω—ã
- ‚ùå –°–µ—Å—Å–∏–∏
- ‚ùå –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–í—Ö–æ–¥

### 3. Realtime (WebSocket)
- ‚ùå Supabase Realtime ‚Üí –°–≤–æ–π WebSocket —Å–µ—Ä–≤–µ—Ä
- ‚ùå –ß–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ùå –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–µ–∑–¥–æ–∫

### 4. Edge Functions
- ‚ùå Telegram –±–æ—Ç (Edge Function)
- ‚ùå Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üéØ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø–æ—à–∞–≥–æ–≤–æ)

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 —á–∞—Å–∞)

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ë–î –≤ Timeweb Cloud

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://timeweb.cloud/my/projects/2005839
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Databases** ‚Üí **Create Database**
3. –í—ã–±–µ—Ä–∏—Ç–µ **PostgreSQL**
4. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–º–∏–Ω–∏–º—É–º 1 –ì–ë)
5. –ó–∞–ø–∏—à–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   - Host
   - Port
   - Database name
   - Username
   - Password

#### –®–∞–≥ 2: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Supabase Dashboard**
1. Supabase Dashboard ‚Üí Database ‚Üí Backups
2. –°–æ–∑–¥–∞–π—Ç–µ backup
3. –°–∫–∞—á–∞–π—Ç–µ SQL –¥–∞–º–ø

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ pg_dump**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –∫–ª–∏–µ–Ω—Ç
brew install postgresql  # macOS
# –∏–ª–∏
sudo apt-get install postgresql-client  # Linux

# –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –∏ –¥–∞–Ω–Ω—ã—Ö
pg_dump -h db.vcjnvkdqjrqymnmqdvfr.supabase.co \
  -U postgres \
  -d postgres \
  --schema=public \
  --no-owner \
  --no-privileges \
  > supabase_backup.sql
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ Supabase CLI**
```bash
supabase db dump -f supabase_backup.sql
```

---

### –§–∞–∑–∞ 2: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (1-2 —á–∞—Å–∞)

#### –®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç –≤ Timeweb Cloud

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î Timeweb
psql -h timeweb-db-host \
  -U timeweb-user \
  -d timeweb-database \
  < supabase_backup.sql
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Timeweb:**
1. Databases ‚Üí –í–∞—à–∞ –ë–î ‚Üí SQL Editor
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `supabase_backup.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ

#### –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ `supabase/migrations/`:

1. `20251213021331_7a00ec87-3392-4efa-8263-d4d1fe272d41.sql`
2. `20251213021356_a5c9a937-87f4-46c5-8704-a93d5b858511.sql`
3. `20250127000000_add_reports_and_admin.sql`
4. `20250128000000_add_telegram_fields.sql`
5. `20250129000000_add_subscriptions.sql`
6. `20250129000001_add_support_tickets.sql`
7. `20250130000000_cleanup_old_rides.sql`
8. `20250130000001_fix_profile_creation_trigger.sql`
9. `20250130000002_fix_security_and_performance.sql`
10. `20250131000000_improve_database_stability.sql`
11. `20250131000001_add_passenger_rating.sql`

**–í–∞–∂–Ω–æ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å.

---

### –§–∞–∑–∞ 3: –ó–∞–º–µ–Ω–∞ Auth —Å–∏—Å—Ç–µ–º—ã (4-6 —á–∞—Å–æ–≤)

#### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–π Auth —Å–∏—Å—Ç–µ–º—ã

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É**

```bash
npm install @auth/core next-auth
# –∏–ª–∏
npm install passport passport-local passport-jwt
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–∏—Å—Ç–µ–º—É**

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:
1. –¢–∞–±–ª–∏—Ü—É `users` (–≤–º–µ—Å—Ç–æ `auth.users`)
2. –¢–∞–±–ª–∏—Ü—É `sessions` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
3. API endpoints –¥–ª—è:
   - `/api/auth/signup`
   - `/api/auth/signin`
   - `/api/auth/signout`
   - `/api/auth/refresh`
4. JWT –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
5. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE public.users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    full_name TEXT,
    phone TEXT,
    email_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å–µ—Å—Å–∏–π
CREATE TABLE public.sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES public.users(id) ON DELETE CASCADE NOT NULL,
    token TEXT UNIQUE NOT NULL,
    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
);

-- –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ auth.users
INSERT INTO public.users (id, email, full_name, created_at)
SELECT id, email, raw_user_meta_data->>'full_name', created_at
FROM auth.users;
```

#### –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/contexts/AuthContext.tsx` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å
- `src/integrations/supabase/client.ts` - –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π API –∫–ª–∏–µ–Ω—Ç
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `useAuth()`

**–ù–æ–≤—ã–π AuthContext:**

```typescript
// src/contexts/AuthContext.tsx
import { createContext, useContext, useState, useEffect } from "react";

interface User {
  id: string;
  email: string;
  full_name: string | null;
}

interface AuthContextType {
  user: User | null;
  loading: boolean;
  signUp: (email: string, password: string, fullName: string) => Promise<{ error: Error | null }>;
  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;
  signOut: () => Promise<void>;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    const token = localStorage.getItem('auth_token');
    if (token) {
      // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ API
      fetch('/api/auth/me', {
        headers: { Authorization: `Bearer ${token}` }
      })
        .then(res => res.json())
        .then(data => {
          if (data.user) setUser(data.user);
          setLoading(false);
        })
        .catch(() => {
          localStorage.removeItem('auth_token');
          setLoading(false);
        });
    } else {
      setLoading(false);
    }
  }, []);

  const signUp = async (email: string, password: string, fullName: string) => {
    const res = await fetch('/api/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password, fullName })
    });
    const data = await res.json();
    if (data.token) {
      localStorage.setItem('auth_token', data.token);
      setUser(data.user);
    }
    return { error: data.error ? new Error(data.error) : null };
  };

  const signIn = async (email: string, password: string) => {
    const res = await fetch('/api/auth/signin', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if (data.token) {
      localStorage.setItem('auth_token', data.token);
      setUser(data.user);
    }
    return { error: data.error ? new Error(data.error) : null };
  };

  const signOut = async () => {
    localStorage.removeItem('auth_token');
    setUser(null);
    await fetch('/api/auth/signout', { method: 'POST' });
  };

  return (
    <AuthContext.Provider value={{ user, loading, signUp, signIn, signOut }}>
      {children}
    </AuthContext.Provider>
  );
};
```

#### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ API endpoints

**–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å backend —Å–µ—Ä–≤–µ—Ä:**

**–í–∞—Ä–∏–∞–Ω—Ç A: Node.js/Express —Å–µ—Ä–≤–µ—Ä**
```typescript
// server/api/auth/signup.ts
import { hash } from 'bcrypt';
import { generateToken } from './jwt';
import { db } from './database';

export async function signUp(req, res) {
  const { email, password, fullName } = req.body;
  
  // –•–µ—à–∏—Ä—É–µ–º –ø–∞—Ä–æ–ª—å
  const passwordHash = await hash(password, 10);
  
  // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const { rows } = await db.query(
    'INSERT INTO users (email, password_hash, full_name) VALUES ($1, $2, $3) RETURNING id, email, full_name',
    [email, passwordHash, fullName]
  );
  
  const user = rows[0];
  const token = generateToken(user.id);
  
  // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
  await db.query(
    'INSERT INTO profiles (user_id, full_name) VALUES ($1, $2)',
    [user.id, fullName]
  );
  
  res.json({ token, user });
}
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Timeweb Cloud Functions**
- –°–æ–∑–¥–∞—Ç—å serverless —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Auth
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API Gateway

---

### –§–∞–∑–∞ 4: –ó–∞–º–µ–Ω–∞ Realtime (3-4 —á–∞—Å–∞)

#### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebSocket —Å–µ—Ä–≤–µ—Ä–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: Socket.io**

```bash
npm install socket.io
```

**–°–æ–∑–¥–∞—Ç—å WebSocket —Å–µ—Ä–≤–µ—Ä:**

```typescript
// server/websocket.ts
import { Server } from 'socket.io';

const io = new Server(server, {
  cors: { origin: '*' }
});

io.on('connection', (socket) => {
  socket.on('join-ride', (rideId) => {
    socket.join(`ride-${rideId}`);
  });

  socket.on('message', async (data) => {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î
    const message = await saveMessage(data);
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –ø–æ–µ–∑–¥–∫–∏
    io.to(`ride-${data.rideId}`).emit('new-message', message);
  });
});
```

**–û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç:**

```typescript
// src/hooks/useMessages.ts
import { io } from 'socket.io-client';

const socket = io('wss://your-timeweb-domain.com');

export const useMessages = (rideId: string) => {
  useEffect(() => {
    socket.emit('join-ride', rideId);
    
    socket.on('new-message', (message) => {
      // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    });
    
    return () => {
      socket.off('new-message');
    };
  }, [rideId]);
};
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å**
- Pusher
- Ably
- PubNub

---

### –§–∞–∑–∞ 5: –ü–µ—Ä–µ–Ω–æ—Å Edge Functions (2-3 —á–∞—Å–∞)

#### –®–∞–≥ 9: –ü–µ—Ä–µ–Ω–æ—Å Telegram –±–æ—Ç–∞

**–¢–µ–∫—É—â–∏–π:** `supabase/functions/telegram-bot/index.ts`

**–ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:**

**–í–∞—Ä–∏–∞–Ω—Ç A: Timeweb Cloud Functions**
- –°–æ–∑–¥–∞—Ç—å serverless —Ñ—É–Ω–∫—Ü–∏—é
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è Telegram

**–í–∞—Ä–∏–∞–Ω—Ç B: –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**
- –°–æ–∑–¥–∞—Ç—å Node.js —Å–µ—Ä–≤–µ—Ä –¥–ª—è –±–æ—Ç–∞
- –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Timeweb Cloud VPS
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook

**–í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å**
- Railway –¥–ª—è –±–æ—Ç–∞
- Render –¥–ª—è –±–æ—Ç–∞
- –û—Ç–¥–µ–ª—å–Ω—ã–π VPS

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –ë–î –≤ Timeweb Cloud
- [ ] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Supabase
- [ ] –°–æ–∑–¥–∞—Ç—å backup

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### Auth —Å–∏—Å—Ç–µ–º–∞
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã users –∏ sessions
- [ ] –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ auth.users
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è Auth
- [ ] –û–±–Ω–æ–≤–∏—Ç—å AuthContext
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é/–≤—Ö–æ–¥

### Realtime
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å WebSocket —Å–µ—Ä–≤–µ—Ä
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç –¥–ª—è —á–∞—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–µ–∑–¥–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å realtime —Ñ—É–Ω–∫—Ü–∏–∏

### Edge Functions
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ Telegram –±–æ—Ç–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç:

1. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `auth.uid()`**
   - –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

2. **–¢—Ä–∏–≥–≥–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `auth.users`**
   - –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ–π `users`

3. **Realtime –ø–æ–¥–ø–∏—Å–∫–∏**
   - Supabase Realtime –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL replication
   - –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º

4. **Edge Functions**
   - Supabase Edge Functions - —ç—Ç–æ Deno runtime
   - –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ–¥ Node.js –∏–ª–∏ –¥—Ä—É–≥–æ–π runtime

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è  
**–†–∏—Å–∫–∏:** –í—ã—Å–æ–∫–∏–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –û—Å—Ç–∞–≤–∏—Ç—å Supabase –¥–ª—è –ë–î, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Timeweb —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### ‚ùå –ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ª–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. ‚ùå –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ –∏ –¥–æ–ª–≥–æ
2. ‚ùå –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
3. ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –º–Ω–æ–≥–æ –∫–æ–¥–∞
4. ‚ùå –ù—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–≤–æ—é Auth —Å–∏—Å—Ç–µ–º—É
5. ‚ùå –ù—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–≤–æ–π WebSocket —Å–µ—Ä–≤–µ—Ä
6. ‚ùå Supabase –±–µ—Å–ø–ª–∞—Ç–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É—é –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Timeweb Cloud      ‚îÇ
‚îÇ  (–§—Ä–æ–Ω—Ç–µ–Ω–¥)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ HTTP
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Supabase           ‚îÇ
‚îÇ  (–ë–î + Auth +       ‚îÇ
‚îÇ   Realtime)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (5 –º–∏–Ω—É—Ç)
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å—ë —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ

---

## üöÄ –ï—Å–ª–∏ –≤—Å—ë-—Ç–∞–∫–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å:
1. –°–æ–∑–¥–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞
2. –ù–∞—Å—Ç—Ä–æ–π–∫–æ–π Auth —Å–∏—Å—Ç–µ–º—ã
3. –ù–∞—Å—Ç—Ä–æ–π–∫–æ–π WebSocket
4. –ü–µ—Ä–µ–Ω–æ—Å–æ–º Edge Functions

**–ù–æ —ç—Ç–æ –∑–∞–π–º–µ—Ç 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã!**

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏—Ç–µ —Å –¥–µ–ø–ª–æ—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Timeweb, –æ—Å—Ç–∞–≤—å—Ç–µ Supabase –¥–ª—è –ë–î. –≠—Ç–æ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.

–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π –∏–ª–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥?
