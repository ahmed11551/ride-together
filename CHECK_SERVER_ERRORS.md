# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ 500 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ssh root@194.67.124.123

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
pm2 logs ride-backend --err --lines 50 --nostream

# –ò–ª–∏ –≤—Å–µ –ª–æ–≥–∏
pm2 logs ride-backend --lines 100

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
pm2 show ride-backend
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å logger (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ –∏–º–ø–æ—Ä—Ç–∞)

–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –æ `logger`, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ `index.ts` - –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º logger –¥–æ –µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
cd /var/www/ride-together/server

# –ü—Ä–æ–≤–µ—Ä–∏–º –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è logger
grep -n "logger\." dist/index.js | head -5

# –ï—Å–ª–∏ logger –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ –∏–º–ø–æ—Ä—Ç–∞, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤—ã—à–µ
```

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å DATABASE_URL –∏–ª–∏ JWT_SECRET

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–æ –æ–Ω–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
pm2 show ride-backend | grep -E "DATABASE_URL|JWT_SECRET"
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

–ï—Å–ª–∏ –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –º–æ–≥—É—Ç –±—ã—Ç—å runtime –æ—à–∏–±–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /var/www/ride-together/server

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
npm ci
npx tsc --noEmitOnError false || true
node fix-imports.js

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
python3 << 'EOF'
import re
f='dist/index.js'
c=open(f,'r',encoding='utf-8').read()
c=re.sub(r'path\.join\(__dirname', 'path.join(process.cwd()', c)
c=re.sub(r'const\s+__filename\s*=\s*fileURLToPath\(import\.meta\.url\);?\s*\n', '', c)
c=re.sub(r'const\s+__dirname\s*=\s*dirname\(__filename\);?\s*\n', '', c)
open(f,'w',encoding='utf-8').write(c)
EOF

pm2 restart ride-backend --update-env
```

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏–ø–∞–º–∏ –≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–¥–µ

**–ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - –æ—Ç–∫–∞—Ç–∏—Ç—å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:**

```bash
cd /var/www/ride-together/server

# –ü—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ dist/index.js —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤–∞–ª–∏–¥–µ–Ω
node -c dist/index.js

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ–º
npm run build
```

---

## üìã –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –≤—ã–≤–æ–¥:

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```bash
pm2 logs ride-backend --err --lines 30 --nostream
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç 500.

