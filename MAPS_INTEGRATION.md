# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç

1. **MapComponent** (`src/components/map/MapComponent.tsx`)
   - –ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ Mapbox GL JS
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞: `view` (–ø—Ä–æ—Å–º–æ—Ç—Ä) –∏ `select` (–≤—ã–±–æ—Ä —Ç–æ—á–∫–∏)
   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
     - –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ—á–∫–∏
     - –ö–Ω–æ–ø–∫–∞ "–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ" –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
     - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏ —Å –º–∞—Ä–∫–µ—Ä–æ–º
     - –ü–æ–∫–∞–∑ –∞–¥—Ä–µ—Å–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏

2. **RidesMap** (`src/components/map/RidesMap.tsx`)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–µ–∑–¥–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞ –∫–∞—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –ø–æ–µ–∑–¥–æ–∫
   - –ú–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–µ–∑–¥–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
   - –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º –ø–æ–µ–∑–¥–∫–∏ –ø–æ –∫–ª–∏–∫—É

### –£—Ç–∏–ª–∏—Ç—ã –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

**geocoding.ts** (`src/lib/geocoding.ts`)
- `geocodeAddress()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ Mapbox Geocoding API
- `reverseGeocode()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –∞–¥—Ä–µ—Å
- `getCityCoordinates()` - fallback —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **CreateRide** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ö–∞—Ä—Ç–∞" –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ—á–µ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–±—ã—Ç–∏—è
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–æ–π –∏ –∫–∞—Ä—Ç–æ–π
   - –í—ã–±–æ—Ä —Ç–æ—á–∫–∏ "–û—Ç–∫—É–¥–∞" –∏ "–ö—É–¥–∞" –Ω–∞ –∫–∞—Ä—Ç–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –Ω–∞ –∫–∞—Ä—Ç–µ

2. **SearchResults** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ö–∞—Ä—Ç–∞" –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–ø–∏—Å–∫–æ–º –∏ –∫–∞—Ä—Ç–æ–π
   - –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –º–∞—Ä–∫–µ—Ä–∞–º–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–µ–∑–¥–∫–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ä

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `package.json`:
- `mapbox-gl: ^3.0.1` - Mapbox GL JS –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- `react-map-gl: ^7.1.7` - React –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è Mapbox
- `@types/mapbox-gl: ^3.0.0` - TypeScript —Ç–∏–ø—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ü–æ–ª—É—á–∏—Ç—å Mapbox —Ç–æ–∫–µ–Ω:**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [mapbox.com](https://www.mapbox.com/)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Account ‚Üí Access tokens](https://account.mapbox.com/access-tokens/)
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Default public token

2. **–î–æ–±–∞–≤–∏—Ç—å –≤ .env:**
   ```env
   VITE_MAPBOX_TOKEN=your-mapbox-token-here
   ```

3. **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Mapbox:**
   - 50,000 –∑–∞–≥—Ä—É–∑–æ–∫ –∫–∞—Ä—Ç –≤ –º–µ—Å—è—Ü
   - 100,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –º–µ—Å—è—Ü
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í—ã–±–æ—Ä —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ (CreateRide)

```tsx
<MapComponent
  mode="select"
  onLocationSelect={(location) => {
    console.log('Selected:', location.lat, location.lng);
  }}
  height="400px"
/>
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–µ–∑–¥–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ (SearchResults)

```tsx
<RidesMap
  rides={rides}
  height="600px"
/>
```

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Graceful degradation** - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Mapbox token, –ø—Ä–æ—Å—Ç–æ –±–µ–∑ –∫–∞—Ä—Ç
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ–ª—è —Ñ–æ—Ä–º—ã
- **Fallback –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤** - –ï—Å–ª–∏ Mapbox –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –ö–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–æ–≤

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- Mapbox token –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (public token)
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –¥–æ–º–µ–Ω—É –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Mapbox
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ Mapbox –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (Google Maps, Leaflet)

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –ø—Ä–∏ –≤–≤–æ–¥–µ (autocomplete)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

